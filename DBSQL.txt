1. 网关表
   
CREATE TABLE `t_gateway_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `deleted` bit(1) DEFAULT b'0',
  `hotel_id` bigint(32) DEFAULT NULL comment '公寓表主键ID',
  `gateway_id` varchar(32) COLLATE utf8_unicode_ci DEFAULT '' COMMENT '网关设备id',
  `status` int(2) NOT NULL DEFAULT '0' COMMENT '设备是否在线  1 在线  0 不在线',
  PRIMARY KEY (`id`),
  KEY `FK_61iomm8p53wtvnlnljxq3wems` (`hotel_id`)
) ENGINE=MyISAM AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='网关信息表'

注意条件加上 deleted=false  



2. 公寓表  相关字段  不相关的已去掉 

CREATE TABLE `hotel_base_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT comment '对应其他表hotel_id',
  
  `appid` varchar(255) DEFAULT NULL comment '取token appid',
  `secret` varchar(255) DEFAULT NULL comment '取token secret',
 
   app_domain   varchar(100) DEFAULT NULL comment '应用服务器域名',

  `device_domain` varchar(100) DEFAULT NULL comment '设备服务器域名',

 `hotel_phone` varchar(32) DEFAULT ' ',

  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=52 DEFAULT CHARSET=utf8

说明：  设备服务器 取token 拿appid,  secret 为唯一标识。  
       获取token路径为  app_domain +  "/api/device/v1/token"  
       推送路径为  app_domain +  "/api/device/v1/notify"  
    举例 app_domain:  http://nhbtek.com/bzser

系统参数表
CREATE TABLE `tb_system_parameter` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `deleted` bit(1) DEFAULT NULL,
  `description` varchar(2000) DEFAULT NULL,
  `parameter_name` varchar(50) DEFAULT NULL,
  `parameter_value` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8
 
 超级管理员邮箱从 系统参数表获取。 select `parameter_value` from `tb_system_parameter` where `parameter_name`='super_email';




3.房间信息表  相关字段  不相关的已去掉 


CREATE TABLE `hotel_room_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `gw_id` bigint(32) DEFAULT NULL COMMENT '网关id',
  `device_id` varchar(32) DEFAULT '' COMMENT '设备id，唯一',
  `roomdevno` varchar(255) DEFAULT NULL comment '设备房间号 设备服务器使用该字段 ',
  `status` int(11) DEFAULT NULL,、
  `barry` float DEFAULT NULL,
  `hotel_id` bigint(32) DEFAULT NULL comment '公寓表主键ID',

  PRIMARY KEY (`id`),

) ENGINE=InnoDB AUTO_INCREMENT=875 DEFAULT CHARSET=utf8




4. 门禁信息表  相关字段  不相关的已去掉 

CREATE TABLE `hotel_public_room` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `gw_id` bigint(32) DEFAULT NULL COMMENT '网关id',
  `device_id` varchar(32) DEFAULT '' COMMENT '设备id，唯一',
  `hotel_id` bigint(32) DEFAULT NULL comment '公寓表主键ID',
 
  `roomdevno` varchar(255) DEFAULT NULL comment '设备房间号 设备服务器使用该字段 '
  `status` int(11) DEFAULT NULL,

) ENGINE=InnoDB AUTO_INCREMENT=71 DEFAULT CHARSET=utf8






